## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | 4.59.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | 4.59.0 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [aws_iam_access_key.iam_access_key](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/iam_access_key) | resource |
| [aws_iam_policy.policy](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/iam_policy) | resource |
| [aws_iam_role.role](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/iam_role) | resource |
| [aws_iam_role_policy_attachment.attach_policy_to_role](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/iam_role_policy_attachment) | resource |
| [aws_iam_user.user](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/iam_user) | resource |
| [aws_iam_user_policy_attachment.attach_policy_to_user](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/iam_user_policy_attachment) | resource |
| [aws_s3_bucket.bucket](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/s3_bucket) | resource |
| [aws_s3_bucket_ownership_controls.ownership](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/s3_bucket_ownership_controls) | resource |
| [aws_s3_bucket_public_access_block.block_access](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/resources/s3_bucket_public_access_block) | resource |
| [aws_iam_policy_document.assume_role](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.assume_role_combined](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/data-sources/iam_policy_document) | data source |
| [aws_iam_policy_document.policy](https://registry.terraform.io/providers/hashicorp/aws/4.59.0/docs/data-sources/iam_policy_document) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_assume_role_statements"></a> [assume\_role\_statements](#input\_assume\_role\_statements) | description = "A list of assumne role statements, if using non blank sid must be unique or latest occurence of sid in list will overwirte prvious statement with same sid"<br>            assume\_role\_statements = {<br>                actions                 : "(Optional) List of actions that this statement either allows or denies. For example, ["ec2:RunInstances", "s3:*"]."<br>                sid                     : "(Optional) (statement ID) is an identifier for a policy statement."<br>                effect                  : "(Optional) Use Allow or Deny to indicate whether the policy allows or denies access."<br>                prinicple\_type          : "(Required) Type of principal. Valid values include AWS, Service, Federated, CanonicalUser and *."<br>                principal\_identifiers   : "(Required) List of identifiers for principals. When type is AWS, these are IAM principal ARNs, e.g., arn:aws:iam::12345678901:role/yak-role. When type is Service, these are AWS Service roles, e.g., lambda.amazonaws.com. When type is Federated, these are web identity users or SAML provider ARNs, e.g., accounts.google.com or arn:aws:iam::12345678901:saml-provider/yak-saml-provider. When type is CanonicalUser, these are canonical user IDs, e.g., 79a59df900b949e55d96a1e698fbacedfd6e09d98eacf8f8d5218e7cd47ef2be."<br>                principal               : "(Required in only some circumstances) â€“ If you create a resource-based policy, you must indicate the account, user, role, or federated user to which you would like to allow or deny access. If you are creating an IAM permissions policy to attach to a user or role, you cannot include this element. The principal is implied as that user or role."        <br>                test                    : "(Required) Name of the IAM condition operator to evaluate."<br>                values                  : "(Required) Values to evaluate the condition against. If multiple values are provided, the condition matches if at least one of them applies. That is, AWS evaluates multiple values as though using an "OR" boolean operation."<br>                variable                : "(Required) Name of a Context Variable to apply the condition to. Context variables may either be standard AWS variables starting with aws: or service-specific variables prefixed with the service name."<br>            } | <pre>list(object({<br>    actions               = optional(list(string))<br>    sid                   = optional(string)<br>    effect                = optional(string)<br>    principal_type        = optional(string)<br>    principal_identifiers = optional(list(string))<br>    conditions = optional(list(object({<br>      test     = string<br>      variable = string<br>      values   = list(string)<br>    })))<br>  }))</pre> | <pre>[<br>  {<br>    "actions": [<br>      "sts:AssumeRole"<br>    ],<br>    "conditions": [<br>      {<br>        "test": "StringEquals",<br>        "values": [<br>          "d6eeb23adcf5e42d64c07755d82b34da"<br>        ],<br>        "variable": "sts:ExternalId"<br>      }<br>    ],<br>    "effect": "Allow",<br>    "principal_identifiers": [<br>      "078992246105"<br>    ],<br>    "principal_type": "AWS",<br>    "sid": "AllowTelestreamCloudAssumeRole"<br>  }<br>]</pre> | no |
| <a name="input_block_public_acls"></a> [block\_public\_acls](#input\_block\_public\_acls) | (Optional, Default:true) Whether Amazon S3 should block public ACLs for this bucket. Defaults to true. Enabling this setting does not affect existing policies or ACLs. When set to true causes the following behavior: PUT Bucket acl and PUT Object acl calls will fail if the specified ACL allows public access. PUT Object calls will fail if the request includes an object ACL. | `bool` | `true` | no |
| <a name="input_block_public_policy"></a> [block\_public\_policy](#input\_block\_public\_policy) | (Optional, Default:true) Whether Amazon S3 should block public bucket policies for this bucket. Defaults to true. Enabling this setting does not affect the existing bucket policy. When set to true causes Amazon S3 to: Reject calls to PUT Bucket policy if the specified bucket policy allows public access. | `bool` | `true` | no |
| <a name="input_bucket_names"></a> [bucket\_names](#input\_bucket\_names) | The list of name for the buckets. Must be lowercase and must be between 3 (min) and 63 (max) characters long, name rules based on https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html | `list(string)` | `[]` | no |
| <a name="input_bucket_prefix"></a> [bucket\_prefix](#input\_bucket\_prefix) | (Optional, Forces new resource) Creates a unique bucket name beginning with the specified prefix. Conflicts with bucket. Must be lowercase and less than or equal to 37 characters in length. A full list of bucket naming rules may be found here https://docs.aws.amazon.com/AmazonS3/latest/userguide/bucketnamingrules.html | `string` | `null` | no |
| <a name="input_bucket_tags"></a> [bucket\_tags](#input\_bucket\_tags) | Key-value map of tags for the Bucket | `map(string)` | `{}` | no |
| <a name="input_enabled"></a> [enabled](#input\_enabled) | (Optional) default true creates the s3 bucket if false does not create any resources | `bool` | `true` | no |
| <a name="input_force_destroy"></a> [force\_destroy](#input\_force\_destroy) | (Optional, Default:false) Boolean that indicates all objects (including any locked objects) should be deleted from the bucket when the bucket is destroyed so that the bucket can be destroyed without error, when set to false need to manualy delete files in bucket before destroying bucket. These objects are not recoverable. This only deletes objects when the bucket is destroyed, not when setting this parameter to true. Once this parameter is set to true, there must be a successful terraform apply run before a destroy is required to update this value in the resource state. Without a successful terraform apply after this parameter is set, this flag will have no effect. If setting this field in the same operation that would require replacing the bucket or destroying the bucket, this flag will not work. Additionally when importing a bucket, a successful terraform apply is required to set this value in state before it will take effect on a destroy operation. | `bool` | `false` | no |
| <a name="input_iam_access"></a> [iam\_access](#input\_iam\_access) | iam\_access = {<br>            assume\_role : "(Optional, Default true) How telestream cloud will access s3 bucket, by assuming a role or using access and secret keys. By default set to assume a role"<br>            create\_iam  : "(Optional, Default true) If set to true will either create a iam role that telestream will assume, if assume\_role is true. If assume\_role is false telestream will use access keys and will create iam user with access and secret keys"<br>            iam\_role\_description             :"(Optional) Description of the role."<br>            iam\_role\_force\_detach\_policies   :"(Optional) Whether to force detaching any policies the role has before destroying it. Defaults to false."<br>            iam\_role\_max\_session\_duration    :"(Optional) Maximum session duration (in seconds) that you want to set for the specified role. If you do not specify a value for this setting, the default maximum of one hour is applied. This setting can have a value from 1 hour to 12 hours."<br>            iam\_role\_name                    :"(Optional, Forces new resource) Friendly name of the role. If omitted, Terraform will assign a random, unique name. See IAM Identifiers for more information. for more infomation and naming convention rules https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html."<br>            iam\_role\_name\_prefix             :"(Optional, Forces new resource) Creates a unique friendly name beginning with the specified prefix. Conflicts with name."<br>            iam\_role\_path                    :"(Optional) Path to the role. See IAM Identifiers for more information."<br>            iam\_role\_permissions\_boundary    :"(Optional) ARN of the policy that is used to set the permissions boundary for the role."<br>            iam\_role\_tags                    :"(Optional) Key-value mapping of tags for the IAM role. If configured with a provider"<br>            iam\_policy\_description :"(Optional, Forces new resource) Description of the IAM policy."<br>            iam\_policy\_name        :"(Optional, Forces new resource) The name of the policy. If omitted, Terraform will assign a random, unique name, for more infomation and naming convention rules https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html."<br>            iam\_policy\_name\_prefix :"(Optional, Forces new resource) Creates a unique name beginning with the specified prefix. Conflicts with name."<br>            iam\_policy\_path        :"(Optional, default '/') Path in which to create the policy. See IAM Identifiers for more information."<br>            iam\_policy\_policies    :"(Optional) The list of policy documents. This is a JSON formatted string file path. For more information about building AWS IAM policy documents with Terraform, see the AWS IAM Policy Document Guide"<br>            iam\_policy\_tags        :"(Optional) Map of resource tags for the IAM Policy. If configured with a provider default\_tags configuration block present, tags with matching keys will overwrite those defined at the provider-level."<br>            iam\_user\_name                    :"(Required) The user's name. The name must consist of upper and lowercase alphanumeric characters with no spaces. You can also include any of the following characters: =,.@-\_.. User names are not distinguished by case. For example, you cannot create users named both "TESTUSER" and "testuser". for more infomation and naming convention rules https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_iam-quotas.html."<br>            iam\_user\_path                    :"(Optional, default "/") Path in which to create the user."<br>            iam\_user\_permissions\_boundary    :"(Optional) The ARN of the policy that is used to set the permissions boundary for the user."<br>            iam\_user\_force\_destroy           :"(Optional, default false) When destroying this user, destroy even if it has non-Terraform-managed IAM access keys, login profile or MFA devices. Without force\_destroy a user with non-Terraform-managed access keys and login profile will fail to be destroyed."<br>            iam\_user\_tags                    :"(Key-value map of tags for the IAM user. If configured with a provider default\_tags configuration block present, tags with matching keys will overwrite those defined at the provider-level."<br>            iam\_user\_pgp\_key                 :"(Requried) Either a base-64 encoded PGP public key, or a keybase username in the form keybase:some\_person\_that\_exists, for use in the encrypted\_secret output attribute. If providing a base-64 encoded PGP public key, make sure to provide the "raw" version and not the "armored" one (e.g. avoid passing the -a option to gpg --export)."<br>            iam\_user\_key\_status                  :"(Optional) Access key status to apply. Defaults to Active. Valid values are Active and Inactive."<br>        } | <pre>object({<br>    assume_role                    = optional(bool, true)<br>    create_iam                     = optional(bool, true)<br>    iam_role_name                  = optional(string)<br>    iam_role_name_prefix           = optional(string)<br>    iam_role_description           = optional(string, "Telestream Cloud Role used to access S3 Bucket, created by terraform")<br>    iam_role_tags                  = optional(map(string))<br>    iam_role_path                  = optional(string)<br>    iam_role_force_detach_policies = optional(bool)<br>    iam_role_max_session_duration  = optional(number)<br>    iam_role_permissions_boundary  = optional(string)<br>    iam_policy_name                = optional(string)<br>    iam_policy_name_prefix         = optional(string)<br>    iam_policy_description         = optional(string, "IAM Policy that grants Telestream Cloud permissions used to access S3 Bucket, created by terraform")<br>    iam_policy_path                = optional(string)<br>    iam_policy_policies            = optional(list(string), [])<br>    iam_policy_tags                = optional(map(string))<br>    iam_user_name                  = optional(string)<br>    iam_user_path                  = optional(string)<br>    iam_user_permissions_boundary  = optional(string)<br>    iam_user_force_destroy         = optional(bool)<br>    iam_user_tags                  = optional(map(string))<br>    iam_user_pgp_key               = optional(string)<br>    iam_user_key_status            = optional(string, "Active")<br>  })</pre> | <pre>{<br>  "assume_role": true,<br>  "create_iam": true<br>}</pre> | no |
| <a name="input_ignore_public_acls"></a> [ignore\_public\_acls](#input\_ignore\_public\_acls) | (Optional, Default:true) Whether Amazon S3 should restrict public bucket policies for this bucket. Defaults to true. Enabling this setting does not affect the previously stored bucket policy, except that public and cross-account access within the public bucket policy, including non-public delegation to specific accounts, is blocked. When set to true: Only the bucket owner and AWS Services can access this buckets if it has a public policy. | `bool` | `true` | no |
| <a name="input_restrict_public_buckets"></a> [restrict\_public\_buckets](#input\_restrict\_public\_buckets) | (Optional, Default:true) Whether Amazon S3 should ignore public ACLs for this bucket. Defaults to true. Enabling this setting does not affect the persistence of any existing ACLs and doesn't prevent new public ACLs from being set. When set to true causes Amazon S3 to: Ignore public ACLs on this bucket and any objects that it contains. | `bool` | `true` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_acceleration_status"></a> [acceleration\_status](#output\_acceleration\_status) | (Optional) The accelerate configuration status of the bucket. Not available in cn-north-1 or us-gov-west-1. |
| <a name="output_acl"></a> [acl](#output\_acl) | The canned ACL applied to the bucket. |
| <a name="output_arn"></a> [arn](#output\_arn) | The ARN of the bucket. Will be of format arn:aws:s3:::bucketname. |
| <a name="output_bucket_domain_name"></a> [bucket\_domain\_name](#output\_bucket\_domain\_name) | The bucket domain name. Will be of format bucketname.s3.amazonaws.com. |
| <a name="output_bucket_regional_domain_name"></a> [bucket\_regional\_domain\_name](#output\_bucket\_regional\_domain\_name) | The bucket region-specific domain name. The bucket domain name including the region name, please refer here for format. Note: The AWS CloudFront allows specifying S3 region-specific endpoint when creating S3 origin, it will prevent redirect issues from CloudFront to S3 Origin URL. |
| <a name="output_cors_rule"></a> [cors\_rule](#output\_cors\_rule) | Set of origins and methods (cross-origin access allowed). |
| <a name="output_grant"></a> [grant](#output\_grant) | The set of ACL policy grants. |
| <a name="output_hosted_zone_id"></a> [hosted\_zone\_id](#output\_hosted\_zone\_id) | The Route 53 Hosted Zone ID for this bucket's region. |
| <a name="output_iam_access_key_create_date"></a> [iam\_access\_key\_create\_date](#output\_iam\_access\_key\_create\_date) | Date and time in RFC3339 format that the access key was created. |
| <a name="output_iam_access_key_encrypted_secret"></a> [iam\_access\_key\_encrypted\_secret](#output\_iam\_access\_key\_encrypted\_secret) | Encrypted secret, base64 encoded, if pgp\_key was specified. This attribute is not available for imported resources. The encrypted secret may be decrypted using the command line, for example: terraform output -raw encrypted\_secret \| base64 --decode \| keybase pgp decrypt. |
| <a name="output_iam_access_key_encrypted_secret_key_decrypt_command"></a> [iam\_access\_key\_encrypted\_secret\_key\_decrypt\_command](#output\_iam\_access\_key\_encrypted\_secret\_key\_decrypt\_command) | Decrypt access secret key command |
| <a name="output_iam_access_key_encrypted_ses_smtp_password_v4"></a> [iam\_access\_key\_encrypted\_ses\_smtp\_password\_v4](#output\_iam\_access\_key\_encrypted\_ses\_smtp\_password\_v4) | Encrypted SES SMTP password, base64 encoded, if pgp\_key was specified. This attribute is not available for imported resources. The encrypted password may be decrypted using the command line, for example: terraform output -raw encrypted\_ses\_smtp\_password\_v4 \| base64 --decode \| keybase pgp decrypt. |
| <a name="output_iam_access_key_id"></a> [iam\_access\_key\_id](#output\_iam\_access\_key\_id) | Access key ID. |
| <a name="output_iam_access_key_key_fingerprint"></a> [iam\_access\_key\_key\_fingerprint](#output\_iam\_access\_key\_key\_fingerprint) | Fingerprint of the PGP key used to encrypt the secret. This attribute is not available for imported resources. |
| <a name="output_iam_access_key_pgp_key"></a> [iam\_access\_key\_pgp\_key](#output\_iam\_access\_key\_pgp\_key) | Either a base-64 encoded PGP public key, or a keybase username in the form keybase:some\_person\_that\_exists, used to encrypt iam in the encrypted\_secret output attribute. If providing a base-64 encoded PGP public key, make sure to provide the raw version and not the armored one (e.g. avoid passing the -a option to gpg --export) |
| <a name="output_iam_access_key_secret"></a> [iam\_access\_key\_secret](#output\_iam\_access\_key\_secret) | Secret access key. This attribute is not available for imported resources. Note that this will be written to the state file. If you use this, please protect your backend state file judiciously. Alternatively, you may supply a pgp\_key instead, which will prevent the secret from being stored in plaintext, at the cost of preventing the use of the secret key in automation. |
| <a name="output_iam_policy_arn"></a> [iam\_policy\_arn](#output\_iam\_policy\_arn) | The ARN assigned by AWS to this policy. |
| <a name="output_iam_policy_description"></a> [iam\_policy\_description](#output\_iam\_policy\_description) | The description of the policy. |
| <a name="output_iam_policy_id"></a> [iam\_policy\_id](#output\_iam\_policy\_id) | The ARN assigned by AWS to this policy. |
| <a name="output_iam_policy_name"></a> [iam\_policy\_name](#output\_iam\_policy\_name) | The name of the policy. |
| <a name="output_iam_policy_path"></a> [iam\_policy\_path](#output\_iam\_policy\_path) | The path of the policy in IAM. |
| <a name="output_iam_policy_policy"></a> [iam\_policy\_policy](#output\_iam\_policy\_policy) | The policy document. |
| <a name="output_iam_policy_policy_id"></a> [iam\_policy\_policy\_id](#output\_iam\_policy\_policy\_id) | The policy's ID. |
| <a name="output_iam_policy_tags_all"></a> [iam\_policy\_tags\_all](#output\_iam\_policy\_tags\_all) | A map of tags assigned to the resource, including those inherited from the provider default\_tags configuration block. |
| <a name="output_iam_role_arn"></a> [iam\_role\_arn](#output\_iam\_role\_arn) | Amazon Resource Name (ARN) specifying the role. |
| <a name="output_iam_role_create_date"></a> [iam\_role\_create\_date](#output\_iam\_role\_create\_date) | Creation date of the IAM role. |
| <a name="output_iam_role_id"></a> [iam\_role\_id](#output\_iam\_role\_id) | Name of the role. |
| <a name="output_iam_role_name"></a> [iam\_role\_name](#output\_iam\_role\_name) | Name of the role. |
| <a name="output_iam_role_tags_all"></a> [iam\_role\_tags\_all](#output\_iam\_role\_tags\_all) | A map of tags assigned to the resource, including those inherited from the provider default\_tags configuration block. |
| <a name="output_iam_role_unique_id"></a> [iam\_role\_unique\_id](#output\_iam\_role\_unique\_id) | Stable and unique string identifying the role. |
| <a name="output_iam_user_arn"></a> [iam\_user\_arn](#output\_iam\_user\_arn) | The ARN assigned by AWS for this user. |
| <a name="output_iam_user_name"></a> [iam\_user\_name](#output\_iam\_user\_name) | The user's name. |
| <a name="output_iam_user_tags_all"></a> [iam\_user\_tags\_all](#output\_iam\_user\_tags\_all) | A map of tags assigned to the resource, including those inherited from the provider default\_tags configuration block. |
| <a name="output_iam_user_unique_id"></a> [iam\_user\_unique\_id](#output\_iam\_user\_unique\_id) | The unique ID assigned by AWS. |
| <a name="output_id"></a> [id](#output\_id) | The name of the bucket. |
| <a name="output_lifecycle_rule"></a> [lifecycle\_rule](#output\_lifecycle\_rule) | A configuration of object lifecycle management. |
| <a name="output_logging"></a> [logging](#output\_logging) | The logging parameters for the bucket. |
| <a name="output_object_lock_configuration"></a> [object\_lock\_configuration](#output\_object\_lock\_configuration) | The S3 object locking configuration. |
| <a name="output_policy"></a> [policy](#output\_policy) | The bucket policy JSON document. |
| <a name="output_region"></a> [region](#output\_region) | The AWS region this bucket resides in. |
| <a name="output_replication_configuration"></a> [replication\_configuration](#output\_replication\_configuration) | The replication configuration. |
| <a name="output_request_payer"></a> [request\_payer](#output\_request\_payer) | Either BucketOwner or Requester that pays for the download and request fees. |
| <a name="output_server_side_encryption_configuration"></a> [server\_side\_encryption\_configuration](#output\_server\_side\_encryption\_configuration) | The server-side encryption configuration. |
| <a name="output_tags_all"></a> [tags\_all](#output\_tags\_all) | A map of tags assigned to the resource, including those inherited from the provider default\_tags configuration block. |
| <a name="output_versioning"></a> [versioning](#output\_versioning) | The versioning state of the bucket. |
